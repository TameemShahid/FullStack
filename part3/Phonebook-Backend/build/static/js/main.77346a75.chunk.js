(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(14),o=t.n(a),r=(t(19),t(3)),u=t(0),i=function(e){var n=e.search,t=e.handleSearch;return Object(u.jsxs)("div",{children:["filter shown with"," ",Object(u.jsx)("input",{type:"text",value:n,onChange:t})]})},s=function(e){var n=e.message,t=e.isError;return null===n?null:Object(u.jsx)("div",{className:t?"error":"success",children:n})},l=function(e){var n=e.addNewPerson,t=e.newName,c=e.handleNameChange,a=e.newNumber,o=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:a,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.handleClick;return Object(u.jsxs)("li",{style:{listStyle:"none"},children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:function(){return t(n.id,n.name)},children:"Delete"})]})},b=t(4),j=t.n(b),h="/api/persons",f=function(){return j.a.get(h).then((function(e){return e.data}))},m=function(e){return j.a.post(h,e).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},p=function(e){return j.a.put("".concat(h,"/").concat(e.id),e).then((function(e){return e.data}))},v=function(){var e=Object(c.useState)([]),n=Object(r.a)(e,2),t=n[0],a=n[1];Object(c.useEffect)((function(){f().then((function(e){a(e)}))}),[]);var o=Object(c.useState)(""),b=Object(r.a)(o,2),j=b[0],h=b[1],v=Object(c.useState)(""),x=Object(r.a)(v,2),g=x[0],w=x[1],C=Object(c.useState)(""),N=Object(r.a)(C,2),S=N[0],k=N[1],y=Object(c.useState)(t),E=Object(r.a)(y,2),D=E[0],P=E[1],T=Object(c.useState)(null),A=Object(r.a)(T,2),I=A[0],J=A[1],U=Object(c.useState)(!1),B=Object(r.a)(U,2),M=B[0],q=B[1],z=function(e,n){window.confirm("Delete ".concat(n))&&O(e).then(a(t.filter((function(n){return n.id!==e}))))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(s,{message:I,isError:M}),Object(u.jsx)(i,{search:S,handleSearch:function(e){if(k(e.target.value),""!==e.target.value){console.log("Not empty");var n=t.filter((function(n){return n.name.toUpperCase().includes(e.target.value.toUpperCase())}));P(n),console.log(n)}else P(t),console.log(D)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(l,{addNewPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j}));n?(console.log(n),n.number=g,console.log(n),window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))&&p(n).then((function(e){a(t.map((function(t){return t.id===n.id?e:t}))),h(""),w(""),J("Modified ".concat(e.name," number to ").concat(e.number)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){console.log("failed"),h(""),w(""),q(!0),J("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){J(null)}),5e3),f().then((function(e){a(e)}))}))):m({name:j,number:g}).then((function(e){a(t.concat(e)),h(""),w(""),P(t),J("Added ".concat(e.name)),setTimeout((function(){J(null)}),5e3)}))},newName:j,handleNameChange:function(e){h(e.target.value)},newNumber:g,handleNumberChange:function(e){w(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),""===S?t.map((function(e){return Object(u.jsx)(d,{person:e,handleClick:z},e.name)})):D.map((function(e){return Object(u.jsx)(d,{person:e,handleClick:z},e.name)}))]})};o.a.render(Object(u.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.77346a75.chunk.js.map