(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(14),a=t.n(r),o=(t(19),t(3)),u=t(0),i=function(e){var n=e.search,t=e.handleSearch;return Object(u.jsxs)("div",{children:["filter shown with"," ",Object(u.jsx)("input",{type:"text",value:n,onChange:t})]})},s=function(e){var n=e.message,t=e.isError;return null===n?null:Object(u.jsx)("div",{className:t?"error":"success",children:n})},l=function(e){var n=e.addNewPerson,t=e.newName,c=e.handleNameChange,r=e.newNumber,a=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:r,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.handleClick;return Object(u.jsxs)("li",{style:{listStyle:"none"},children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:function(){return t(n.id,n.name)},children:"Delete"})]})},b=t(4),h=t.n(b),j="/api/persons",f=function(){return h.a.get(j).then((function(e){return e.data}))},m=function(e){return h.a.post(j,e).then((function(e){return e.data}))},O=function(e){return h.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},p=function(e){return h.a.put("".concat(j,"/").concat(e.id),e).then((function(e){return e.data}))},v=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1];Object(c.useEffect)((function(){f().then((function(e){r(e)}))}),[]);var a=Object(c.useState)(""),b=Object(o.a)(a,2),h=b[0],j=b[1],v=Object(c.useState)(""),x=Object(o.a)(v,2),g=x[0],w=x[1],C=Object(c.useState)(""),N=Object(o.a)(C,2),S=N[0],k=N[1],E=Object(c.useState)(t),y=Object(o.a)(E,2),T=y[0],D=y[1],P=Object(c.useState)(null),R=Object(o.a)(P,2),A=R[0],J=R[1],U=Object(c.useState)(!1),B=Object(o.a)(U,2),I=B[0],M=B[1],q=function(e,n){window.confirm("Delete ".concat(n))&&O(e).then(r(t.filter((function(n){return n.id!==e})))).catch((function(e){M(!0),J("Error: ".concat(e.response.data)),setTimeout((function(){return J(null)}),5e3)}))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(s,{message:A,isError:I}),Object(u.jsx)(i,{search:S,handleSearch:function(e){if(k(e.target.value),""!==e.target.value){console.log("Not empty");var n=t.filter((function(n){return n.name.toUpperCase().includes(e.target.value.toUpperCase())}));D(n),console.log(n)}else D(t),console.log(T)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(l,{addNewPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===h}));n?(n.number=g,window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one?"))&&p(n).then((function(e){r(t.map((function(t){return t.id===n.id?e:t}))),j(""),w(""),J("Modified ".concat(e.name," number to ").concat(e.number)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){j(""),w(""),M(!0),J("Error: ".concat(e.response.data.error)),setTimeout((function(){M(!1),J(null)}),5e3),f().then((function(e){r(e)}))}))):m({name:h,number:g}).then((function(e){r(t.concat(e)),j(""),w(""),D(t),J("Added ".concat(e.name)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){console.log("ERROR: ".concat(e.response.data.error)),j(""),M(!0),w(""),D(""),J("Error: ".concat(e.response.data.error)),setTimeout((function(){J(null),M(!1)}),5e3)}))},newName:h,handleNameChange:function(e){j(e.target.value)},newNumber:g,handleNumberChange:function(e){w(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),""===S?t.map((function(e){return Object(u.jsx)(d,{person:e,handleClick:q},e.name)})):T.map((function(e){return Object(u.jsx)(d,{person:e,handleClick:q},e.name)}))]})};a.a.render(Object(u.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a9304b4a.chunk.js.map